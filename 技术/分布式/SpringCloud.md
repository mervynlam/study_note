# SpringCloud

<!--开始学习时间20200427-->

## 系统架构的演变

### 单体应用架构

一个系统包含所有的功能模块。

- 优点：
  - 开发简单
  - 适用于小型应用
- 缺点：
  - 不易扩展（只能集群）
  - 代码耦合度高

### 垂直应用架构

把一个系统拆分成多个模块，每个模块部署在一个web服务器中。

- 优点：
  - 解决高并发问题
  - 针对不同的模块优化
  - 方便水平扩展
  - 容错
- 缺点：
  - 模块间相互独立
  - 重复开发工作

### 分部式SOA架构

一个服务以独立的形式存在于系统的进程中。

把业务逻辑抽象成可服用、可组装的服务，通过服务的编排实现业务的快速再生，目的：把原先固有的业务功能转变为通用的业务服务，实现业务逻辑的快速复用。

- 优点：
  - 分布式
  - 可复用，抽取公共的功能为服务，提高开发效率
  - 扩展灵活，对不同的服务进行集群化部署，解决系统压力
  - 松耦合
- 缺点：
  - 抽取服务的粒度较大
  - 服务提供方与调用方接口耦合度高

### 微服务架构

- 优点：
  - 通过对服务的原子化拆分，以及微服务独立打包、部署和升级
  - 微服务遵循单一原则。微服务之间采用Restful等轻量级协议传输
- 缺点：
  - 微服务过多，服务治理成本高，不利于系统维护。
  - 分布式系统开发的技术成本高（容错、分布式事务等）

### SOA与微服务的区别

SOA（Service Oriented Architecture）“面向服务的架构”：是一种设计方法，包含多个服务，服务之间通过相互依赖最终提供一系列的功能。一个服务通常以独立的形式存在于操作系统进程中。各个服务之间通过网络调用。

微服务架构：是在SOA上做升华，“业务需要彻底的组件化和服务化”，原有的单个业务系统会拆分成多个可独立开发、设计、运行的小应用。这些小应用之间通过服务完成交互和集成。

### CAP定理

- 一致性 （Consistency）所有节点访问同一份最新的数据副本，保持数据一致。
- 可用性（Availability）部分节点故障后，仍能对客户端请求发出非错响应。
- 分区容错性（Partition tolerance）分区指的是网络意义上的分区。节点之间出现无法通讯的情况，要保证系统可以继续正常服务，即分区容错性

根据定理，分布式系统只能满足三项中的两项，而不可能满足全部三项。

