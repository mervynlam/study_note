# JVM

<!--20200616-->

## 什么是JVM

### 定义

Java Virtual Machine - Java 程序运行环境

### 优点

- 跨平台
- 自动内存管理，垃圾回收功能

### 比较

`JDK` - `JRE` + 编译工具

`JRE` - `JVM` + 基础类库

`JVM`

## 内存结构

### 程序计数器 - Program Counter Register

#### **作用**

找到下一条jvm指令的执行地址

> 从字节码的执行原理来看，单线程的情况下程序计数器是可有可无的。因为即使没有程序计数器的情况下，程序会按照指令顺序执行下去，即使遇到了分支跳转这样的流程也会按照跳转到指定的指令处继续顺序执行下去，是完全能够保证执行顺序的。
>
> 但是现实中程序往往是多线程协作完成任务的。JVM的多线程是通过CPU时间片轮转来实现的，某个线程在执行的过程中可能会因为时间片耗尽而挂起。当它再次获取时间片时，需要从挂起的地方继续执行。在JVM中，通过程序计数器来记录程序的字节码执行位置。程序计数器具有线程隔离性，每个线程拥有自己的程序计数器

#### 特点

- 程序计数器具有**线程隔离性**，每个线程拥有自己的程序计数器，跟线程共存亡
- 程序计数器占用的内存空间非常小，可以忽略不计
- 程序计数器是java虚拟机规范中**唯一一个没有规定任何OutofMemeryError的区域**
- 程序执行的时候，程序计数器是有值的，其记录的是程序正在执行的字节码的地址
- 执行native本地方法时，程序计数器的值为空。原因是native方法是java通过jni调用本地C/C++库来实现，非java字节码实现，所以无法统计

### 虚拟机栈

## 参考资料

[理解JVM - 黑马程序员](https://www.bilibili.com/video/BV1yE411Z7AP)

[JVM刨根问底之程序计数器 - 大道化简](https://blog.csdn.net/sunhuiliang85/article/details/90718251)